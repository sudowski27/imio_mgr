"""version 0.1.0"""
from io import StringIO
import pandas as pd
import numpy as np
from extend_samples.src.get_coeffs_for_current_device import get_coeffs_for_current_device


csv_data = """
1 0.000000e+00 5.000000e-02 2.010414e-11
1 2.500000e-02 5.000000e-02 4.356364e-11
1 5.000000e-02 5.000000e-02 9.431862e-11
1 7.500000e-02 5.000000e-02 2.036896e-10
1 1.000000e-01 5.000000e-02 4.380531e-10
1 1.250000e-01 5.000000e-02 9.363573e-10
1 1.500000e-01 5.000000e-02 1.984651e-09
1 1.750000e-01 5.000000e-02 4.159118e-09
1 2.000000e-01 5.000000e-02 8.589520e-09
1 2.250000e-01 5.000000e-02 1.742334e-08
1 2.500000e-01 5.000000e-02 3.460561e-08
1 2.750000e-01 5.000000e-02 6.709105e-08
1 3.000000e-01 5.000000e-02 1.263562e-07
1 3.250000e-01 5.000000e-02 2.290963e-07
1 3.500000e-01 5.000000e-02 3.945476e-07
1 3.750000e-01 5.000000e-02 6.371526e-07
1 4.000000e-01 5.000000e-02 9.592541e-07
1 4.250000e-01 5.000000e-02 1.350594e-06
1 4.500000e-01 5.000000e-02 1.794065e-06
1 4.750000e-01 5.000000e-02 2.272039e-06
1 5.000000e-01 5.000000e-02 2.769991e-06
1 5.250000e-01 5.000000e-02 3.277486e-06
1 5.500000e-01 5.000000e-02 3.787711e-06
1 5.750000e-01 5.000000e-02 4.296536e-06
1 6.000000e-01 5.000000e-02 4.801600e-06
1 6.250000e-01 5.000000e-02 5.301623e-06
1 6.500000e-01 5.000000e-02 5.795929e-06
1 6.750000e-01 5.000000e-02 6.284153e-06
1 7.000000e-01 5.000000e-02 6.766073e-06
1 7.250000e-01 5.000000e-02 7.241512e-06
1 7.500000e-01 5.000000e-02 7.710300e-06
1 7.750000e-01 5.000000e-02 8.172251e-06
1 8.000000e-01 5.000000e-02 8.627158e-06
1 8.250000e-01 5.000000e-02 9.074803e-06
1 8.500000e-01 5.000000e-02 9.514955e-06
1 8.750000e-01 5.000000e-02 9.947379e-06
1 9.000000e-01 5.000000e-02 1.037184e-05
1 9.250000e-01 5.000000e-02 1.078812e-05
1 9.500000e-01 5.000000e-02 1.119601e-05
1 9.750000e-01 5.000000e-02 1.159529e-05
1 1.000000e+00 5.000000e-02 1.198579e-05
1 1.025000e+00 5.000000e-02 1.236735e-05
1 1.050000e+00 5.000000e-02 1.273982e-05
1 1.075000e+00 5.000000e-02 1.310306e-05
1 1.100000e+00 5.000000e-02 1.345697e-05
1 1.125000e+00 5.000000e-02 1.380147e-05
1 1.150000e+00 5.000000e-02 1.413648e-05
1 1.175000e+00 5.000000e-02 1.446195e-05
1 1.200000e+00 5.000000e-02 1.477785e-05
1 1.225000e+00 5.000000e-02 1.508416e-05
1 1.250000e+00 5.000000e-02 1.538088e-05
1 1.275000e+00 5.000000e-02 1.566804e-05
1 1.300000e+00 5.000000e-02 1.594566e-05
1 0.000000e+00 1.000000e-01 2.348826e-11
1 2.500000e-02 1.000000e-01 5.079492e-11
1 5.000000e-02 1.000000e-01 1.098647e-10
1 7.500000e-02 1.000000e-01 2.371286e-10
1 1.000000e-01 1.000000e-01 5.097671e-10
1 1.250000e-01 1.000000e-01 1.089296e-09
1 1.500000e-01 1.000000e-01 2.308201e-09
1 1.750000e-01 1.000000e-01 4.836685e-09
1 2.000000e-01 1.000000e-01 9.992297e-09
1 2.250000e-01 1.000000e-01 2.029635e-08
1 2.500000e-01 1.000000e-01 4.044920e-08
1 2.750000e-01 1.000000e-01 7.898012e-08
1 3.000000e-01 1.000000e-01 1.507389e-07
1 3.250000e-01 1.000000e-01 2.795547e-07
1 3.500000e-01 1.000000e-01 4.983883e-07
1 3.750000e-01 1.000000e-01 8.429083e-07
1 4.000000e-01 1.000000e-01 1.337689e-06
1 4.250000e-01 1.000000e-01 1.982845e-06
1 4.500000e-01 1.000000e-01 2.753563e-06
1 4.750000e-01 1.000000e-01 3.613610e-06
1 5.000000e-01 1.000000e-01 4.529367e-06
1 5.250000e-01 1.000000e-01 5.475769e-06
1 5.500000e-01 1.000000e-01 6.436194e-06
1 5.750000e-01 1.000000e-01 7.400358e-06
1 6.000000e-01 1.000000e-01 8.362164e-06
1 6.250000e-01 1.000000e-01 9.318088e-06
1 6.500000e-01 1.000000e-01 1.026609e-05
1 6.750000e-01 1.000000e-01 1.120494e-05
1 7.000000e-01 1.000000e-01 1.213381e-05
1 7.250000e-01 1.000000e-01 1.305209e-05
1 7.500000e-01 1.000000e-01 1.395922e-05
1 7.750000e-01 1.000000e-01 1.485466e-05
1 8.000000e-01 1.000000e-01 1.573790e-05
1 8.250000e-01 1.000000e-01 1.660838e-05
1 8.500000e-01 1.000000e-01 1.746557e-05
1 8.750000e-01 1.000000e-01 1.830895e-05
1 9.000000e-01 1.000000e-01 1.913799e-05
1 9.250000e-01 1.000000e-01 1.995221e-05
1 9.500000e-01 1.000000e-01 2.075114e-05
1 9.750000e-01 1.000000e-01 2.153434e-05
1 1.000000e+00 1.000000e-01 2.230142e-05
1 1.025000e+00 1.000000e-01 2.305200e-05
1 1.050000e+00 1.000000e-01 2.378578e-05
1 1.075000e+00 1.000000e-01 2.450245e-05
1 1.100000e+00 1.000000e-01 2.520177e-05
1 1.125000e+00 1.000000e-01 2.588354e-05
1 1.150000e+00 1.000000e-01 2.654757e-05
1 1.175000e+00 1.000000e-01 2.719374e-05
1 1.200000e+00 1.000000e-01 2.782194e-05
1 1.225000e+00 1.000000e-01 2.843210e-05
1 1.250000e+00 1.000000e-01 2.902420e-05
1 1.275000e+00 1.000000e-01 2.959824e-05
1 1.300000e+00 1.000000e-01 3.015423e-05
1 0.000000e+00 1.500000e-01 2.540087e-11
1 2.500000e-02 1.500000e-01 5.482796e-11
1 5.000000e-02 1.500000e-01 1.184740e-10
1 7.500000e-02 1.500000e-01 2.555644e-10
1 1.000000e-01 1.500000e-01 5.491552e-10
1 1.250000e-01 1.500000e-01 1.172930e-09
1 1.500000e-01 1.500000e-01 2.484084e-09
1 1.750000e-01 1.500000e-01 5.201787e-09
1 2.000000e-01 1.500000e-01 1.073808e-08
1 2.250000e-01 1.500000e-01 2.179215e-08
1 2.500000e-01 1.500000e-01 4.339309e-08
1 2.750000e-01 1.500000e-01 8.466974e-08
1 3.000000e-01 1.500000e-01 1.615457e-07
1 3.250000e-01 1.500000e-01 2.997348e-07
1 3.500000e-01 1.500000e-01 5.355529e-07
1 3.750000e-01 1.500000e-01 9.110077e-07
1 4.000000e-01 1.500000e-01 1.462585e-06
1 4.250000e-01 1.500000e-01 2.208782e-06
1 4.500000e-01 1.500000e-01 3.143354e-06
1 4.750000e-01 1.500000e-01 4.237653e-06
1 5.000000e-01 1.500000e-01 5.450648e-06
1 5.250000e-01 1.500000e-01 6.741332e-06
1 5.500000e-01 1.500000e-01 8.077021e-06
1 5.750000e-01 1.500000e-01 9.435280e-06
1 6.000000e-01 1.500000e-01 1.080199e-05
1 6.250000e-01 1.500000e-01 1.216861e-05
1 6.500000e-01 1.500000e-01 1.352998e-05
1 6.750000e-01 1.500000e-01 1.488288e-05
1 7.000000e-01 1.500000e-01 1.622517e-05
1 7.250000e-01 1.500000e-01 1.755528e-05
1 7.500000e-01 1.500000e-01 1.887193e-05
1 7.750000e-01 1.500000e-01 2.017401e-05
1 8.000000e-01 1.500000e-01 2.146050e-05
1 8.250000e-01 1.500000e-01 2.273040e-05
1 8.500000e-01 1.500000e-01 2.398278e-05
1 8.750000e-01 1.500000e-01 2.521674e-05
1 9.000000e-01 1.500000e-01 2.643143e-05
1 9.250000e-01 1.500000e-01 2.762604e-05
"""

expected_data = np.array([0.99693099, 1.75142059, 1.09691907, 0.34857945, 1.65142074, -0.06053906,
  0.68027804, 2.50565472, -1.15707516])


def test_0():
    """
    Test 0

    Test getting numpy array from pandas DataFrame
    """
    data = StringIO(csv_data)
    device_1_data_frame = pd.read_csv(data, sep=' ', header=None)
    channel_width = 130e-9

    coeffs = get_coeffs_for_current_device(device_1_data_frame, channel_width)
    delta = 1e-6

    assert np.allclose(coeffs, expected_data, atol=delta)
